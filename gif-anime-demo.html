<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
	<title>GIFアニメーションを制御</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/1.5.2/css/ionicons.min.css">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
	<div class="demo-content cf" style="background-color:orange">
		<h1 style="text-align:center">GIFアニメーションを制御</h1>
		<figure>
			<img src="http://oshimamasara.rf.gd/01/img/private/room.jpg" height="300" width="400" alt="Static Image" data-alt="http://oshimamasara.rf.gd/01/img/private/room.gif" />
			<figcaption>教室</a></figcaption>
		</figure>
		<figure>
			<img src="http://oshimamasara.rf.gd/01/img/private/event.jpg" height="600" width="800" alt="Twitter Share Button" data-alt="http://oshimamasara.rf.gd/01/img/private/event.gif">
			<figcaption>イベント</figcaption>
		</figure>
		<figure>
			<img src="http://oshimamasara.rf.gd/01/img/private/kyuusyoku.jpeg" height="300" width="400" alt="" data-alt="http://oshimamasara.rf.gd/01/img/private/kyuusyoku.gif">
			<figcaption>給食</figcaption>
		</figure>
	</div>

<script>
(function($) {

	var getGif = function() {
		var gif = [];
		$('img').each(function() {
			var data = $(this).data('alt');
			gif.push(data);
		});
		return gif;
	}

	var gif = getGif();

	var image = [];

	$.each(gif, function(index) {
		image[index]     = new Image();
		image[index].src = gif[index];
	});

	$('figure').on('click', function() {

		var $this   = $(this),
				$index  = $this.index(),

				$img    = $this.children('img'),
				$imgSrc = $img.attr('src'),
				$imgAlt = $img.attr('data-alt'),
				$imgExt = $imgAlt.split('.');

		if($imgExt[1] === 'gif') {
			$img.attr('src', $img.data('alt')).attr('data-alt', $imgSrc);
		} else {
			$img.attr('src', $imgAlt).attr('data-alt', $img.data('alt'));
		}

		$this.toggleClass('play');
	});

})(jQuery);
</script>

</body>
</html>
